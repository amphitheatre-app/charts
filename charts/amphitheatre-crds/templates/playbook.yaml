apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  name: playbooks.amphitheatre.app
spec:
  group: amphitheatre.app
  names:
    categories: []
    kind: Playbook
    plural: playbooks
    shortNames: []
    singular: playbook
  scope: Cluster
  versions:
  - additionalPrinterColumns: []
    name: v1
    schema:
      openAPIV3Schema:
        description: Auto-generated derived type for PlaybookSpec via `CustomResource`
        properties:
          spec:
            properties:
              actors:
                description: All the actors involved in this playbook
                items:
                  properties:
                    build:
                      description: Describes how images are built.
                      nullable: true
                      properties:
                        arguments:
                          description: Arguments passed to the build.
                          items:
                            type: string
                          nullable: true
                          type: array
                        builder:
                          description: Builds images using Cloud Native Buildpacks, which Cluster Builder image used.
                          nullable: true
                          type: string
                        context:
                          description: Directory containing the artifact's sources.
                          nullable: true
                          type: string
                        dockerfile:
                          description: Builds images using kaniko. Locates the Dockerfile relative to workspace.
                          nullable: true
                          type: string
                        environments:
                          additionalProperties:
                            type: string
                          description: Environment variables, in the key=value form, passed to the build.
                          nullable: true
                          type: object
                        exclude:
                          description: Files to exclude when building.
                          items:
                            type: string
                          nullable: true
                          type: array
                        include:
                          description: Files to include when building.
                          items:
                            type: string
                          nullable: true
                          type: array
                      type: object
                    command:
                      description: overrides the default command declared by the container image (i.e. by Dockerfileâ€™s CMD)
                      nullable: true
                      type: string
                    description:
                      description: The description of the actor.
                      nullable: true
                      type: string
                    environments:
                      additionalProperties:
                        type: string
                      description: 'Defines environment variables set in the container. Any boolean values: true, false, yes, no, SHOULD be enclosed in quotes to ensure they are not converted to True or False by the YAML parser.'
                      nullable: true
                      type: object
                    image:
                      description: 'Specifies the image to launch the container. The image must follow the Open Container Specification addressable image format. such as: [<registry>/][<project>/]<image>[:<tag>|@<digest>].'
                      type: string
                    name:
                      description: The name of the actor.
                      type: string
                    partners:
                      additionalProperties:
                        description: Your characters can depend on other partners from other registries, git repositories, or subdirectories on your local file system.
                        properties:
                          branch:
                            description: Git branch the partner should be cloned from. eg. master or main
                            nullable: true
                            type: string
                          path:
                            description: Relative path from the repo root to the configuration file. eg. getting-started/.amp.toml. default is `.amp.toml`.
                            nullable: true
                            type: string
                          repo:
                            description: Source code repository the partner should be cloned from. e.g. https://github.com/amphitheatre-app/amphitheatre.git.
                            type: string
                          rev:
                            description: A commit hash like rev = "4c59b707", or a named reference exposed by the remote repository such as rev = "refs/pull/493/head". What references are available varies by where the repo is hosted.
                            nullable: true
                            type: string
                          tag:
                            description: Git tag the partner should be cloned from. eg. v1.0
                            nullable: true
                            type: string
                        required:
                        - repo
                        type: object
                      description: Depend on other partners from other repositories, or subdirectories on your local file system.
                      nullable: true
                      type: object
                    services:
                      description: Defines the behavior of a service
                      items:
                        description: Defines the behavior of a service
                        properties:
                          kind:
                            description: Type determines how the Service is exposed. Defaults to ClusterIP. Valid options are ExternalName, ClusterIP, NodePort, and LoadBalancer.
                            nullable: true
                            type: string
                          ports:
                            description: The list of ports that are exposed by this service.
                            items:
                              description: List of ports to expose from the container.
                              properties:
                                expose:
                                  description: Exposes HTTP and HTTPS routes from outside the cluster to services within the cluster.
                                  nullable: true
                                  type: boolean
                                port:
                                  description: The port that will be exposed by this service.
                                  format: int32
                                  type: integer
                                protocol:
                                  description: The IP protocol for this port. Supports "TCP", "UDP", and "SCTP". Default is TCP.
                                  nullable: true
                                  type: string
                              required:
                              - port
                              type: object
                            type: array
                        required:
                        - ports
                        type: object
                      nullable: true
                      type: array
                    source:
                      description: The source of the actor.
                      properties:
                        branch:
                          description: Git branch the partner should be cloned from. eg. master or main
                          nullable: true
                          type: string
                        path:
                          description: Relative path from the repo root to the configuration file. eg. getting-started/.amp.toml. default is `.amp.toml`.
                          nullable: true
                          type: string
                        repo:
                          description: Source code repository the partner should be cloned from. e.g. https://github.com/amphitheatre-app/amphitheatre.git.
                          type: string
                        rev:
                          description: A commit hash like rev = "4c59b707", or a named reference exposed by the remote repository such as rev = "refs/pull/493/head". What references are available varies by where the repo is hosted.
                          nullable: true
                          type: string
                        tag:
                          description: Git tag the partner should be cloned from. eg. v1.0
                          nullable: true
                          type: string
                      required:
                      - repo
                      type: object
                    sync:
                      description: sync mode, if enabled, pulls the latest code from source version control in real time via Webhook, etc. and then rebuilds and deploys it
                      nullable: true
                      type: boolean
                  required:
                  - image
                  - name
                  - source
                  type: object
                nullable: true
                type: array
              description:
                description: The description of the playbook
                type: string
              namespace:
                description: Namespace for its managed resources and Actor deployment instances
                type: string
              preface:
                description: The starting character for this playbook
                properties:
                  branch:
                    description: Git branch the partner should be cloned from. eg. master or main
                    nullable: true
                    type: string
                  path:
                    description: Relative path from the repo root to the configuration file. eg. getting-started/.amp.toml. default is `.amp.toml`.
                    nullable: true
                    type: string
                  repo:
                    description: Source code repository the partner should be cloned from. e.g. https://github.com/amphitheatre-app/amphitheatre.git.
                    type: string
                  rev:
                    description: A commit hash like rev = "4c59b707", or a named reference exposed by the remote repository such as rev = "refs/pull/493/head". What references are available varies by where the repo is hosted.
                    nullable: true
                    type: string
                  tag:
                    description: Git tag the partner should be cloned from. eg. v1.0
                    nullable: true
                    type: string
                required:
                - repo
                type: object
              sync:
                description: Global sync mode, if enabled, pulls the latest code from source version control in real time via Webhook, etc. and then rebuilds and deploys it
                nullable: true
                type: boolean
              title:
                description: The title of the playbook
                type: string
            required:
            - description
            - namespace
            - preface
            - title
            type: object
          status:
            nullable: true
            properties:
              conditions:
                items:
                  description: Condition contains details for one aspect of the current state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: lastTransitionTime is the last time the condition transitioned from one status to another. This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: message is a human readable message indicating details about the transition. This may be an empty string.
                      type: string
                    observedGeneration:
                      description: observedGeneration represents the .metadata.generation that the condition was set based upon. For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date with respect to the current state of the instance.
                      format: int64
                      type: integer
                    reason:
                      description: reason contains a programmatic identifier indicating the reason for the condition's last transition. Producers of specific condition types may define expected values and meanings for this field, and whether the values are considered a guaranteed API. The value should be a CamelCase string. This field may not be empty.
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
            type: object
        required:
        - spec
        title: Playbook
        type: object
    served: true
    storage: true
    subresources:
      status: {}
